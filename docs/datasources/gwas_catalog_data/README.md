# GWAS Catalog data source

This document was updated on 2024-09-11

Data stored under `gs://gwas_catalog_data` bucket comes with following structure:

```
gs://gwas_catalog_data/credible_set_datasets/
gs://gwas_catalog_data/curated_inputs/
gs://gwas_catalog_data/harmonised_summary_statistics/
gs://gwas_catalog_data/manifests/
gs://gwas_catalog_data/raw_summary_statistics/
gs://gwas_catalog_data/study_index/
gs://gwas_catalog_data/study_locus_datasets/
```

## raw_summary_statistics

This directory contains summary statistics in the form of harmonised (by GWAS Catalog) gzipped tsv files that are synced directly from the [GWAS Catalog FTP server](https://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/) by a cron job.

## curated_inputs

This directory contains GWAS Catalog metadata input files required to create curation table. The source of the metadata comes from [release directory in GWAS Catalog FTP serve](https://ftp.ebi.ac.uk/pub/databases/gwas/releases/latest/). This include

- study ancestries
- study metadata
- ontology associations

All described in [downloads](https://www.ebi.ac.uk/gwas/docs/file-downloads)

List of harmonised files comes from [summary statistics directory in GWAS Catalog FTP server](https://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/harmonised_list.txt)

All of the files used for the curation can be downloaded by [gentroutils](https://github.com/opentargets/gentroutils/blob/v0.1.5/src/gentroutils/commands/update_gwas_curation_metadata.py)

## manifests

This directory contains inputs and outputs of the [GWAS Curation update dag](https://github.com/opentargets/orchestration/blob/dev/src/ot_orchestration/dags/gwas_curation_update.py).

### manual curation process

The main output of the GWAS Curation update dag is the `GWAS_Catalog_study_curation.tsv` file that gets uploaded to the [curation repository](https://raw.githubusercontent.com/opentargets/curation/master/genetics/GWAS_Catalog_study_curation.tsv).

When data release starts, the file mentioned above is downloaded to the `manifests/` directory and used as a cached input to the curation update dag which appends to it newly synced summary statistics from GWAS Catalog FTP with their metadata. After that the `updated GWAS_Catalog_study_curation.tsv` file is used to perform the manual curation of the new studies.

The result of manual curation is used during the next release.

The curation process runs per each release, the inputs to the curation process are the outputs from previous curation.

## harmonised_summary_statistics

This directory contains outputs from the Open Targets inhouse ETL harmonisation process described in [GWAS Catalog harmonisation dag](https://github.com/opentargets/orchestration/blob/dev/src/ot_orchestration/dags/gwas_catalog_harmonisation.py). The result is the [SummaryStatistics dataset](https://opentargets.github.io/gentropy/python_api/datasets/summary_statistics/) saved in parquet format per summary statistics input file.

## study_index

This directory contains the [study_index dataset](https://opentargets.github.io/gentropy/python_api/datasets/study_index/) generated by the [GWAS Catalog preprocess dag](https://github.com/opentargets/orchestration/blob/dev/src/ot_orchestration/dags/gwas_catalog_preprocess.py)

## study_locus_datasets

This directory contains clumping results for GWAS Catalog datasets produced by the Open Targets ETL. The methods used are:

- [ld_clumping](https://opentargets.github.io/gentropy/python_api/methods/clumping/)
- [window_based_clumping](https://opentargets.github.io/gentropy/python_api/methods/clumping/)

The details of the process can be found in [GWAS Catalog preprocess dag](https://github.com/opentargets/orchestration/blob/dev/src/ot_orchestration/dags/gwas_catalog_preprocess.py)

## credible_set_datasets

This directory contains finemapping results for GWAS Catalog datasets produced by the Open Targets (either manually or by the ETL). This consists of:

- gs://gwas_catalog_data/credible_set_datasets/gwas_catalog_PICSed_curated_associations/ (PICS run only on top hits)
- gs://gwas_catalog_data/credible_set_datasets/gwas_catalog_PICSed_summary_statistics/ (PICS run on full summary statistics)
- gs://gwas_catalog_data/credible_set_datasets/gwas_catalog_susie_summary_statistics/ (SuSiE-inf run on full summary statistics)
