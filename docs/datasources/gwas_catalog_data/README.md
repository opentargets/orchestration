# GWAS Catalog data source

This document was updated on 2024-10-18

Data stored under 4 buckets:

- `gs://gwas_catalog_inputs`
- `gs://gwas_catalog_sumstats_pics`
- `gs://gwas_catalog_sumstats_susie`
- `gs://gwas_catalog_top_hits`

## GWAS Catalog inputs

Bucket `gs://gwas_catalog_inputs` contains:

```
gs://gwas_catalog_inputs/gwas_catalog_associations_ontology_annotated.tsv
gs://gwas_catalog_inputs/gwas_catalog_download_ancestries.tsv
gs://gwas_catalog_inputs/gwas_catalog_download_studies.tsv
gs://gwas_catalog_inputs/harmonisation_manifest.csv
gs://gwas_catalog_inputs/harmonisation_summary/
gs://gwas_catalog_inputs/harmonised_summary_statistics/
gs://gwas_catalog_inputs/raw_summary_statistics/
gs://gwas_catalog_inputs/summary_statistics_qc/
```

### raw_summary_statistics

This directory contains summary statistics in the form of harmonised (by GWAS Catalog) gzipped tsv files that are synced directly from the [GWAS Catalog FTP server](https://ftp.ebi.ac.uk/pub/databases/gwas/summary_statistics/) by a cron job.

### harmonised_summary_statistics

This directory contains outputs from the Open Targets inhouse ETL harmonisation process described in [GWAS Catalog harmonisation dag](https://github.com/opentargets/orchestration/blob/dev/src/ot_orchestration/dags/gwas_catalog_sumstat_harmonisation.py). The result is the [SummaryStatistics dataset](https://opentargets.github.io/gentropy/python_api/datasets/summary_statistics/) saved in parquet format per summary statistics input file.

### harmonisation_manifest.csv

The `harmonisation_manifest.csv` is the file that is generated before the harmonisation is performed. This is the input file to all google batch jobs that are used to perform Harmonisation and Quality Checks on raw summary statistics.

### curated_inputs

Files derived from [release directory in GWAS Catalog FTP serve](https://ftp.ebi.ac.uk/pub/databases/gwas/releases/latest/). This include

- study ancestries - `gwas_catalog_download_ancestries.tsv`
- study metadata - `gwas_catalog_download_studies.tsv`
- ontology associations - `gwas_catalog_associations_ontology_annotated.tsv`

These files contain the metadata required to create the study index.

All described in [downloads](https://www.ebi.ac.uk/gwas/docs/file-downloads)

## study_index

This directory contains the [study_index dataset](https://opentargets.github.io/gentropy/python_api/datasets/study_index/) generated by the [GWAS Catalog preprocess dag](https://github.com/opentargets/orchestration/blob/dev/src/ot_orchestration/dags/gwas_catalog_preprocess.py)

## study_locus_datasets

This directory contains clumping results for GWAS Catalog datasets produced by the Open Targets ETL. The methods used are:

- [ld_clumping](https://opentargets.github.io/gentropy/python_api/methods/clumping/)
- [window_based_clumping](https://opentargets.github.io/gentropy/python_api/methods/clumping/)

The details of the process can be found in [GWAS Catalog preprocess dag](https://github.com/opentargets/orchestration/blob/dev/src/ot_orchestration/dags/gwas_catalog_preprocess.py)

## credible_set_datasets

This directory contains finemapping results for GWAS Catalog datasets produced by the Open Targets (either manually or by the ETL). This consists of:

- gs://gwas_catalog_data/credible_set_datasets/gwas_catalog_PICSed_curated_associations/ (PICS run only on top hits)
- gs://gwas_catalog_data/credible_set_datasets/gwas_catalog_PICSed_summary_statistics/ (PICS run on full summary statistics)
- gs://gwas_catalog_data/credible_set_datasets/gwas_catalog_susie_summary_statistics/ (SuSiE-inf run on full summary statistics)
